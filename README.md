# CHUNITHM Game System Specifications

## 1. 概要 (General Overview)
CHUNITHM（チュウニズム）は、セガが提供するアーケード音楽ゲーム。
「空間を切り裂く新感覚音ゲー」をコンセプトとし、以下の2つのデバイスを使用した立体的な操作が特徴。
- **Ground Slider**: 手元にあるタッチパネルデバイス。16分割（あるいはそれ以上）のセンサーで構成される。
- **AIR Strings**: 空間センサー。プレイヤーの手の上げ下げや空中での動きを検知する。

## 2. ノーツ定義 (Notes Definition)
譜面（チャート）を構成するオブジェクトの種類と仕様。

```
[TAP] (タップ)
- 色: 赤色
- 動作: タイミングよくスライダーを叩く。
- 特性: 
  - 最も基本的なノーツ。
  - 譜面によって幅が異なり、指1本分から全押しサイズまで変化する。

[ExTAP] (エックスタップ)
- 色: 黄色
- 動作: タイミングよくスライダーを叩く。
- 特性:
  - TAPの上位種。
  - 判定が緩和されており、MISS判定以外はすべて最高判定「JUSTICE CRITICAL」となる。
  - 成功時に特殊なエフェクトと打撃音が発生する。
  - ゲージ上昇率やスコア安定化に寄与するボーナスノーツ的役割。

[HOLD] (ホールド)
- 色: 黄色の帯
- 動作: 始点をタップし、終点までスライダーを押し続ける。
- 仕様:
  - 終点で指を離す必要はない（押しっぱなしで処理完了）。
  - 始点・中間・終点で判定がある。
  - 途中で指が離れても、判定エリア内に素早く戻せば復帰可能。

[SLIDE] (スライド)
- 色: 青色の帯
- 動作: 始点をタップし、帯のラインに合わせてスライダー上で指を動かす。
- 仕様:
  - HOLDと異なり、動くラインに追従する必要がある。
  - 判定はかなり甘く、見た目よりも広範囲で反応する。
  - 終点で指を離す必要はない。

[AIR] (エアー)
- 色: 緑色の上向き矢印
- 動作: 手を高く振り上げる。
- 結合規則:
  - 必ずTAP, ExTAP, FLICK, HOLD/SLIDEの終点・中継点（AIR-CRUSH）に付随する。
  - 地上のノーツを取った直後に手を上げる動作が求められる。

[AIR-ACTION] (エアーアクション)
- 色: 紫色の空中ノーツ
- 動作: 空中で手を振る（リズムに合わせて上下させる）。
- 構成:
  - AIR-HOLD（緑色の空中帯）の上に配置される。
  - センサーが一定の高さでの振動（Velocity変化）を検知して判定する。

[FLICK] (フリック)
- 色: 水色
- 動作: スライダーを左右どちらかに素早く払う。
- 仕様:
  - タップのみでは反応しない。
  - スライダー上での座標移動速度が必要。
  - 連続してくると「擦り」と呼ばれるテクニックで処理されることが多い。

[DAMAGE] (ダメージノーツ)
- 色: 黒・紫・炎のエフェクト
- 条件: WORLD'S END譜面などの特殊モードでのみ出現。
- 動作: スルーする（触らない）ことが正解。
- ペナルティ: 触れるとMISS判定、ライフ減少、スコア減点などが発生する。
```

## 3. 判定ロジック (Judgement Logic)
タイミング精度による区分。

```
JUSTICE CRITICAL (JC)
- 精度: 最高
- スコア: 101% (基礎点 + 1%)
- コンボ: 継続
- 備考: 理論値狙いにおける必須判定。

JUSTICE (J)
- 精度: 良
- スコア: 100% (基礎点のみ)
- コンボ: 継続
- 備考: 通称「赤J」。コンボは繋がるが、スコア理論値（1,010,000点）からは失点となる。

ATTACK (A)
- 精度: 可
- スコア: 50%
- コンボ: 切断 (アタックブレイク)
- 備考: フルコンボ失敗となる判定。

MISS (M)
- 精度: 不可
- スコア: 0%
- コンボ: 切断
```

## 4. スコアシステム (Scoring System)
CHUNITHMのスコアは、総ノーツ数に関わらず **1,010,000点** が満点となるよう正規化される。

```
[計算式]
Total Score = Base Score (Max 1,000,000) + Accuracy Bonus (Max 10,000)

1. Base Score (基礎点)
   - 重み: 全ノーツ均等（ロングノーツの内部分割数等は譜面による）。
   - 計算: 1,000,000 / 総ノーツ数 = 1ノーツあたりの基礎点
   - 配分:
     - JC/J : 100%
     - A    : 50%
     - M    : 0%

2. Accuracy Bonus (精度ボーナス)
   - 重み: 全ノーツ均等。
   - 計算: 10,000 / 総ノーツ数 = 1ノーツあたりのボーナス
   - 配分:
     - JC   : 100%
     - J以下 : 0%

[クリアランク基準]
SSS+ : 1,009,000 以上
SSS  : 1,007,500 以上
SS+  : 1,005,000 以上
SS   : 1,000,000 以上
S+   : 990,000 以上
S    : 975,000 以上 (Master解禁ボーダー)
AAA  : 950,000 以上
AA   : 925,000 以上
A    : 900,000 以上
Sランク未満はクリア失敗扱いとなるケースが多い（課題曲進行など）。
```

## 5. レーティングシステム (Rating System)
プレイヤーの実力を示す数値。

### 5.1 譜面定数 (Chart Constant)
画面上のレベル表記（例: Lv 14）とは別に設定された、0.1単位の内部数値。
- Lv 14.0 〜 14.9 の範囲が存在する。
- ユーザー間では「定数」と呼ばれる。

### 5.2 譜面別レーティング値 (Chart Rating Calculation)
単曲のプレイ結果から算出される値。

```
基本式:
単曲レート = 譜面定数 + ランク係数

[ランク係数テーブル]
SSS+ (1,009,000〜) : +2.15 (上限)
SSS  (1,007,500〜) : +2.0
SS+  (1,005,000〜) : +1.5
SS   (1,000,000〜) : +1.0
S    (975,000〜)   : +0.0

[中間スコアの計算] (線形補間)
SSS〜SSS+: 定数 + 2.0 + (スコア - 1,007,500) × 0.0001
SS+〜SSS : 定数 + 1.5 + (スコア - 1,005,000) × 0.0002
SS〜SS+  : 定数 + 1.0 + (スコア - 1,000,000) × 0.0001
S〜SS    : 定数 + 0.0 + (スコア - 975,000)   × 0.00004
S未満    : 定数よりマイナス補正がかかる
```

### 5.3 プレイヤーレーティング (Player Rating Calculation)
プロフィールに表示される数値。
以下の **計40譜面** の平均値となる。

```
Rating = (Best枠合計 + Recent枠合計) / 40

1. Best枠 (30譜面)
   - プレイヤーの全履歴の中で、単曲レートが高い上位30譜面。
   - 同一曲でも難易度が異なれば重複可（例: MasterとUltima）。
   - プレイするごとに再計算され、更新された場合のみ入れ替わる。

2. Recent枠 (10譜面)
   - 直近のプレイ履歴（数十曲分）の中から、単曲レートが高い上位10譜面。
   - 新しい曲をプレイすると履歴が押し出されるため、常に良いスコアを出し続けないと維持できない。
   - WORLD'S ENDなど一部対象外の楽曲がある。
```

## 6. OVER POWER (オーバーパワー)
レーティングとは別の「やり込み度」指標。

```
仕様:
- 各楽曲のクリア状況に応じてポイントが加算される。
- 難易度（BASIC, ADVANCED, EXPERT, MASTER, ULTIMA）ごとに個別に計算され、合算される。

加算要素:
1. クリアランク（SSS+など）による基礎点
2. FULL COMBO ボーナス
3. ALL JUSTICE ボーナス

特徴:
- 楽曲削除がない限り、数値が減少することはない。
- 全楽曲AJ（オールジャスティス）達成時に理論最大値となる。
```

## 7. マップ進行とキャラクター (Map & Character)
```
マップ進行度 = (基本進行マス) + (チケットボーナス) + (スキルボーナス)

基本進行マス:
- クリアランクやプレイ内容によって変動。

スキル (Skill):
- キャラクターに装備させる能力。
- 種類:
  - ゲージブースト系: クリアしやすくなる。
  - マップボーナス系: マスが多く進める。
  - リスキー系: 特定の判定（MISSなど）を出すと強制終了する代わりにボーナスが増える。
```

## 8. 用語集 (Glossary)
システム理解に必要な用語。

```
[AJ] (All Justice)
- 全ノーツをJまたはJCで処理すること。スコア1,000,000点以上が確定する。

[理論値] (Theoretical Value)
- 全ノーツをJCで処理すること。スコア1,010,000点。

[鳥 / 鳥プラ]
- 鳥: SSSランク（トリプルエス）の俗称。
- 鳥プラ: SSS+ランクの俗称。

[許容数]
- 目標ランク（SSSなど）を取るために、あと何個まで「赤J」や「MISS」を出せるかの計算値。
- 例: 「SSS許容 赤J 25個」など。

[逆走]
- SLIDEノーツの判定仕様を利用し、本来の矢印方向とは逆に指を動かして処理するテクニック。

[アタックブレイク]
- ATTACK判定によりコンボが途切れること。フルコンボ狙い時の最大の敵。
```
